{% extends 'photos/home.html' %}

{% block title %}Feed - Haven{% endblock %}

{% block content %}
<div class="container">
  <div class="row mb-5">
    <div class="col-12">
      <h1 class="display-5 mb-2">Your Feed</h1>
      <p class="text-muted">Posts from the creators you follow</p>
    </div>
  </div>
  
  <div class="row">
    {% for post in posts %}
      <div class="col-md-6 col-lg-4 mb-4">
        <div class="card h-100 border-0 shadow-sm" style="border-radius: 10px; overflow: hidden; transition: transform 0.3s ease, box-shadow 0.3s ease;" 
             onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 8px 20px rgba(0,0,0,0.15)';"
             onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(0,0,0,0.1)';">
          <img src="{{ post.banner.url }}" class="card-img-top" alt="{{ post.title }}" style="height: 200px; object-fit: cover;">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">{{ post.title|truncatewords:8 }}</h5>
            <p class="card-text text-secondary" style="flex-grow: 1; font-size: 0.95rem;">
              {{ post.body|truncatewords:15 }}
            </p>
            <div class="border-top pt-3 mt-3">
              <small class="text-muted">
                <strong>{{ post.author.username }}</strong> â€¢ {{ post.date|date:"M d, Y" }}
              </small>
            </div>
            <a href="{% url 'blog:page' slug=post.slug %}" class="btn btn-outline-primary btn-sm mt-3">Read More</a>
          </div>
        </div>
      </div>
    {% empty %}
      <div class="col-12">
        <div class="alert alert-info text-center py-5" role="alert">
          <h5>No posts yet</h5>
          <p class="mb-0">Follow some creators to see their posts here.</p>
          <a href="{% url 'blog:user-list' %}" class="btn btn-primary mt-3">Browse Creators</a>
        </div>
      </div>
    {% endfor %}
  </div>
</div>
{% endblock %}


